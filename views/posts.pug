doctype html
html(lang="ja")
  head
    meta(charset="UTF-8")
    title SECRET BOARD
    style(type="text/css").
      body{
        width: 600px;
        margin: auto;
        text-align: center;
        background-color: #999966;
        color: #FFFFCC;
        font-family: sans-serif;
      }
      span{
        font-size: 160%;
      }
      h1 {
        font-size: 300%;
      }
      h2{
        color: #CCFFCC;
      }
      h3{
        color: #FFCCCC;
      }
      h4{
        color: #FFFF00;
      }
      
  body
    h3 
      a(href="/logout") LOGOUT
    h1 SECRET BOARD
    br
    h2 NEW
    form(method="post" action="/posts")
      div
        textarea(name="content" cols=40 rows=7 maxlength="150")
      div
        button(type="submit") POST
    br
    br

    h2 POST LIST
    div ]------------------------------------------------------------------------------------------[
    each post in posts
      - let isPostedByAdmin = (post.postedBy === 'admin')
      if isPostedByAdmin
        h3 #{post.id} : ★ADMIN★
      else
        h3 #{post.id} : ID:#{post.trackingCookie}
      span
        p!= post.content
      h4 #{post.formattedCreatedAt}
      - let isAdmin = (user === 'admin')
      if isAdmin
        p WRITER : #{post.postedBy}
      - let isDeletable = (user === post.postedBy || isAdmin)
      if isDeletable
        form(method="post" action="/posts?delete=1")
          input(type="hidden" name="id" value=post.id)
          button(type="submit" onclick='return confirm("Are you sure?");') DELETE
      div ]------------------------------------------------------------------------------------------[

